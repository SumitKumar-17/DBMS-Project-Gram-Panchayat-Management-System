generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = "postgresql://22CS30056:sumit%23123@10.5.18.73:5432/22CS30056"
}

model Government_Monitor{
    monitor_id Int @id @default(autoincrement())
    email String @unique
    password String 
}

model Citizen {
  citizen_id            Int            @id @default(autoincrement())
  name                  String
  gender                String
  dob                   DateTime
  household_id          Int
  educational_qualification String
  household             Household      @relation(fields: [household_id], references: [household_id])
  landRecords           LandRecord[]
  panchayatEmployees    PanchayatEmployee[]
  schemeEnrollments     SchemeEnrollment[]
  vaccinations          Vaccination[]
  censusData            CensusDatum[]
}

model Household {
  household_id    Int       @id @default(autoincrement())
  address         String
  income          Decimal   @db.Decimal(10, 2)
  citizens        Citizen[]
  censusData      CensusDatum[]
}

model LandRecord {
  land_id        Int      @id @default(autoincrement())
  citizen_id     Int
  area_acres     Decimal @db.Decimal(10, 2)
  crop_type      String
  citizen        Citizen @relation(fields: [citizen_id], references: [citizen_id])
}

model PanchayatEmployee {
  employee_id    Int    @id @default(autoincrement())
  citizen_id     Int
  role           String
  citizen        Citizen @relation(fields: [citizen_id], references: [citizen_id])
}

model Asset {
  asset_id       Int      @id @default(autoincrement())
  type           String
  location       String
  installation_date DateTime
}

model WelfareScheme {
  scheme_id      Int       @id @default(autoincrement())
  name           String
  description    String
  schemeEnrollments SchemeEnrollment[]
}

model SchemeEnrollment {
  enrollment_id  Int       @id @default(autoincrement())
  citizen_id     Int
  scheme_id      Int
  enrollment_date DateTime
  citizen        Citizen   @relation(fields: [citizen_id], references: [citizen_id])
  scheme         WelfareScheme @relation(fields: [scheme_id], references: [scheme_id])
}

model Vaccination {
  vaccination_id Int       @id @default(autoincrement())
  citizen_id     Int
  vaccine_type   String
  date_administered DateTime
  citizen        Citizen   @relation(fields: [citizen_id], references: [citizen_id])
}

model CensusDatum {
  household_id   Int
  citizen_id     Int
  event_type     String
  event_date     DateTime
  household      Household @relation(fields: [household_id], references: [household_id])
  citizen        Citizen   @relation(fields: [citizen_id], references: [citizen_id])

  @@id([household_id, citizen_id, event_date])
}
